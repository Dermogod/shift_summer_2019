# уязвимость/атака

## Описание
SSRF - это возможность передавать url, по которому впоследствии перейдет уязвимый сервер. В данной атаке злоумышленник может использовать функциональные возможности сервера для чтения или обновления внутренних ресурсов. Злоумышленник может предоставить или изменить URL-адрес, по которому код, выполняемый на сервере, будет считывать или отправлять данные, и, тщательно выбрав URL-адреса, злоумышленник сможет прочитать конфигурацию сервера, такую как метаданные AWS, подключиться к внутренним службам, таким как http включить базы данных или выполнить почтовые запросы к внутренним службам, которые не предназначены для разоблачения. [owasp.org](https://www.owasp.org/index.php/Server_Side_Request_Forgery)

## Классификация
SSRF можно отнести к виду XSS атаки. 

## Условия
- ОС: любая
- язык: любая
- компоненты: библиотеки, инфраструктура сети
- настройки: разные
	
## Детектирование
Для детектирования данной уязвимости можно использовать как ручное так и автоматизированное тестирование.
При автоматизированном тестирование можно использовать сканеры уязвимостей для внедрения XSS пейлоадов во все возможные точки ввода приложения. 


## Эксплуатация

Здесь необходимо описать пример ручной эксплуатации. Сразу уточните какой это язык, какие компоненты используются, если эксплуатация специфична только для этих условий. Можно записать сюда порядок действий при эксплуатации тестового задания

### Инструменты
- [BurpSuite](https://portswigger.net/burp)
- [Голова на плечах](https://ru.wikipedia.org/wiki/%D0%93%D0%BE%D0%BB%D0%BE%D0%B2%D0%B0)
- [Руки из плеч](https://ru.wikipedia.org/wiki/%D0%A0%D1%83%D0%BA%D0%B0) 


## Ущерб
- Сканирование внутренней сети компании
- Обращение к внутренним ресурсам компании, которые могут содержать чувствительную
информацию
- Обращение к метаинформации облачного провайдера
- API Kubernetes
- Исполнение произвольных HTTP GET-запросов

## Защита
### Основные меры
- Проверять схему в ссылке и работать только с HTTP/HTTPS
- Проверять адрес в ссылке и блокировать запросы на внутренние подсети 

### Превентивные меры
- Ограничить доступ к внутренней
инфраструктуре для потенциально
подверженных SSRF серверов
- Вынести  функционал в отдельный
изолированный сервис общий для всех
команд

## Дополнительно
Источники:
- [Digital Security Presentation]](https://dsec.ru/wp-content/uploads/2018/09/techtrain_ssrf.pdf)

## Обход защиты
Можно использовать фильтры которые используют библиотеки
```
http://[::]:80/
https://localhost/
```
и др. [PayloadsAllTheThings](https://github.com/swisskyrepo/PayloadsAllTheThings/blob/master/Server%20Side%20Request%20Forgery/README.md)

